var $e=Object.defineProperty;var Te=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var te=(e,t,n)=>(Te(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function k(){}function be(e){return e()}function de(){return Object.create(null)}function D(e){e.forEach(be)}function xe(e){return typeof e=="function"}function R(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ce(e){return Object.keys(e).length===0}function ke(e,...t){if(e==null){for(const i of t)i(void 0);return k}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function g(e,t){e.appendChild(t)}function U(e,t,n){e.insertBefore(t,n||null)}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function Ee(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function ce(e){return document.createTextNode(e)}function q(){return ce(" ")}function S(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function qe(e){return Array.from(e.childNodes)}function Ae(e,t){t=""+t,e.data!==t&&(e.data=t)}function ne(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function je(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}let Q;function J(e){Q=e}function ue(){if(!Q)throw new Error("Function called outside component initialization");return Q}function Fe(){const e=ue();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const c=je(t,n,{cancelable:i});return o.slice().forEach(s=>{s.call(e,c)}),!c.defaultPrevented}return!0}}function ie(e,t){return ue().$$.context.set(e,t),t}function G(e){return ue().$$.context.get(e)}const P=[],L=[];let I=[];const re=[],Le=Promise.resolve();let se=!1;function Be(){se||(se=!0,Le.then(A))}function le(e){I.push(e)}function Oe(e){re.push(e)}const oe=new Set;let M=0;function A(){if(M!==0)return;const e=Q;do{try{for(;M<P.length;){const t=P[M];M++,J(t),ze(t.$$)}}catch(t){throw P.length=0,M=0,t}for(J(null),P.length=0,M=0;L.length;)L.pop()();for(let t=0;t<I.length;t+=1){const n=I[t];oe.has(n)||(oe.add(n),n())}I.length=0}while(P.length);for(;re.length;)re.pop()();se=!1,oe.clear(),J(e)}function ze(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(le)}}function He(e){const t=[],n=[];I.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),I=t}const Z=new Set;let B;function Me(){B={r:0,c:[],p:B}}function Ne(){B.r||D(B.c),B=B.p}function F(e,t){e&&e.i&&(Z.delete(e),e.i(t))}function O(e,t,n,i){if(e&&e.o){if(Z.has(e))return;Z.add(e),B.c.push(()=>{Z.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function he(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pe(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function W(e){e&&e.c()}function K(e,t,n){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),le(()=>{const c=e.$$.on_mount.map(be).filter(xe);e.$$.on_destroy?e.$$.on_destroy.push(...c):D(c),e.$$.on_mount=[]}),o.forEach(le)}function V(e,t){const n=e.$$;n.fragment!==null&&(He(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Se(e,t){e.$$.dirty[0]===-1&&(P.push(e),Be(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(e,t,n,i,o,c,s,u=[-1]){const r=Q;J(e);const l=e.$$={fragment:null,ctx:[],props:c,update:k,not_equal:o,bound:de(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:de(),dirty:u,skip_bound:!1,root:t.target||r.$$.root};s&&s(l.root);let b=!1;if(l.ctx=n?n(e,t.props||{},(x,m,...w)=>{const T=w.length?w[0]:m;return l.ctx&&o(l.ctx[x],l.ctx[x]=T)&&(!l.skip_bound&&l.bound[x]&&l.bound[x](T),b&&Se(e,x)),m}):[],l.update(),b=!0,D(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){const x=qe(t.target);l.fragment&&l.fragment.l(x),x.forEach(z)}else l.fragment&&l.fragment.c();t.intro&&F(e.$$.fragment),K(e,t.target,t.anchor),A()}J(r)}class Y{constructor(){te(this,"$$");te(this,"$$set")}$destroy(){V(this,1),this.$destroy=k}$on(t,n){if(!xe(n))return k;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!Ce(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ie="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ie);function Ke(e){let t;return{c(){t=v("main"),t.innerHTML='<div id="title" class="svelte-10nycl4">FullMind.head*</div> <div id="tools" class="svelte-10nycl4"><button class="svelte-10nycl4">heads...</button></div>',h(t,"class","svelte-10nycl4")},m(n,i){U(n,t,i)},p:k,i:k,o:k,d(n){n&&z(t)}}}class Ve extends Y{constructor(t){super(),X(this,t,null,Ke,R,{})}}function De(e){let t,n,i,o,c,s;return{c(){t=v("div"),n=v("textarea"),i=q(),o=v("textarea"),h(n,"id","inputTextarea"),h(n,"rows","1"),h(n,"placeholder",e[1]),h(n,"class","svelte-hr39n5"),h(o,"id","visibleTextarea"),h(o,"spellcheck","false"),h(o,"rows","1"),h(o,"class","svelte-hr39n5"),h(t,"id","textareas"),h(t,"class","svelte-hr39n5")},m(u,r){U(u,t,r),g(t,n),e[6](n),g(t,i),g(t,o),e[10](o),c||(s=[S(n,"keydown",e[7]),S(n,"input",e[8]),S(n,"focus",e[9]),S(o,"focus",e[11])],c=!0)},p(u,[r]){r&2&&h(n,"placeholder",u[1])},i:k,o:k,d(u){u&&z(t),e[6](null),e[10](null),c=!1,D(s)}}}function Re(e,t,n){let{inputTextarea:i}=t,o,{placeholder:c}=t;function s(){function d(){n(0,i.style.height="0px",i),n(0,i.style.height=i.scrollHeight+"px",i),n(2,o.style.height=i.style.height,o),n(2,o.value=i.value,o)}d()}const u=Fe();function r(d){u("keydown",{keyevent:d})}function l(d){u("focus")}function b(d){L[d?"unshift":"push"](()=>{i=d,n(0,i)})}const x=d=>{r(d)},m=()=>s(),w=()=>l();function T(d){L[d?"unshift":"push"](()=>{o=d,n(2,o)})}const f=()=>i.focus();return e.$$set=d=>{"inputTextarea"in d&&n(0,i=d.inputTextarea),"placeholder"in d&&n(1,c=d.placeholder)},[i,c,o,s,r,l,b,x,m,w,T,f]}class ge extends Y{constructor(t){super(),X(this,t,Re,De,R,{inputTextarea:0,placeholder:1})}get inputTextarea(){return this.$$.ctx[0]}set inputTextarea(t){this.$$set({inputTextarea:t}),A()}get placeholder(){return this.$$.ctx[1]}set placeholder(t){this.$$set({placeholder:t}),A()}}function Ue(e){let t,n,i,o,c,s,u,r,l,b,x,m,w,T,f,d,E,a,p,j,y,C;f=new ge({props:{placeholder:e[2].thot.heading}}),f.$on("keydown",e[6]),f.$on("focus",_e);function _($){e[11]($)}let ae={placeholder:e[2].thot.content};return e[1]!==void 0&&(ae.inputTextarea=e[1]),a=new ge({props:ae}),L.push(()=>Pe(a,"inputTextarea",_)),a.$on("keydown",e[6]),a.$on("focus",_e),{c(){t=v("main"),n=v("div"),i=v("div"),o=v("button"),o.textContent="Dive",c=q(),s=v("button"),s.textContent="fold",u=q(),r=v("div"),l=v("span"),b=ce(e[3]),x=q(),m=v("div"),w=v("div"),T=q(),W(f.$$.fragment),d=q(),E=v("div"),W(a.$$.fragment),h(o,"type","button"),h(o,"class","dive svelte-syjmq0"),h(s,"type","button"),h(s,"class","fold svelte-syjmq0"),h(i,"id","options"),h(i,"class","svelte-syjmq0"),h(l,"id","index"),h(l,"class","svelte-syjmq0"),h(w,"id","heading"),h(w,"class","svelte-syjmq0"),h(E,"id","contentTextarea"),h(E,"class","svelte-syjmq0"),ne(m,"display","flex"),ne(m,"flex-direction","column"),ne(m,"width","100%"),h(m,"class","svelte-syjmq0"),h(r,"id","content"),h(r,"class","svelte-syjmq0"),h(n,"id","container"),h(n,"style",e[5]),h(n,"class","svelte-syjmq0"),h(t,"class","svelte-syjmq0")},m($,H){U($,t,H),g(t,n),g(n,i),g(i,o),g(i,c),g(i,s),e[9](s),g(n,u),g(n,r),g(r,l),g(l,b),g(r,x),g(r,m),g(m,w),g(m,T),K(f,m,null),g(m,d),g(m,E),K(a,E,null),e[12](t),j=!0,y||(C=S(s,"cilck",e[10]),y=!0)},p($,[H]){(!j||H&8)&&Ae(b,$[3]);const fe={};H&4&&(fe.placeholder=$[2].thot.heading),f.$set(fe);const ee={};H&4&&(ee.placeholder=$[2].thot.content),!p&&H&2&&(p=!0,ee.inputTextarea=$[1],Oe(()=>p=!1)),a.$set(ee)},i($){j||(F(f.$$.fragment,$),F(a.$$.fragment,$),j=!0)},o($){O(f.$$.fragment,$),O(a.$$.fragment,$),j=!1},d($){$&&z(t),e[9](null),V(f),V(a),e[12](null),y=!1,C()}}}let Ge=20;function Je(e){if(e)return e.join(".")}function _e(){}function Qe(e,t,n){let{data:i}=t,{i:o}=t,{root:c}=t,{index:s=i.index}=t,{string_index:u=Je(i.index)}=t,r,{contentTextarea:l}=t;const b=G("createBrotherContainer"),x=G("moveContainerFocus");G("focusContainerAt"),G("createNewContainer"),G("foldContainerChildren");let m="margin-left:"+Ge*i.index.length+"px;";function w(a){let p=a.detail.keyevent;p.key==="Enter"&&p.ctrlKey&&b(i,o),p.key.search("Arrow")>-1&&p.ctrlKey&&x(s,o,p.key)}function T(a){L[a?"unshift":"push"](()=>{r=a,n(4,r)})}const f=()=>void 0;function d(a){l=a,n(1,l)}function E(a){L[a?"unshift":"push"](()=>{c=a,n(0,c)})}return e.$$set=a=>{"data"in a&&n(2,i=a.data),"i"in a&&n(7,o=a.i),"root"in a&&n(0,c=a.root),"index"in a&&n(8,s=a.index),"string_index"in a&&n(3,u=a.string_index),"contentTextarea"in a&&n(1,l=a.contentTextarea)},[c,l,i,u,r,m,w,o,s,T,f,d,E]}class We extends Y{constructor(t){super(),X(this,t,Qe,Ue,R,{data:2,i:7,root:0,index:8,string_index:3,contentTextarea:1})}get data(){return this.$$.ctx[2]}set data(t){this.$$set({data:t}),A()}get i(){return this.$$.ctx[7]}set i(t){this.$$set({i:t}),A()}get root(){return this.$$.ctx[0]}set root(t){this.$$set({root:t}),A()}get index(){return this.$$.ctx[8]}set index(t){this.$$set({index:t}),A()}get string_index(){return this.$$.ctx[3]}set string_index(t){this.$$set({string_index:t}),A()}get contentTextarea(){return this.$$.ctx[1]}set contentTextarea(t){this.$$set({contentTextarea:t}),A()}}const N=[];function ye(e,t=k){let n;const i=new Set;function o(u){if(R(e,u)&&(e=u,n)){const r=!N.length;for(const l of i)l[1](),N.push(l,e);if(r){for(let l=0;l<N.length;l+=2)N[l][0](N[l+1]);N.length=0}}}function c(u){o(u(e))}function s(u,r=k){const l=[u,r];return i.add(l),i.size===1&&(n=t(o,c)||k),u(e),()=>{i.delete(l),i.size===0&&n&&(n(),n=null)}}return{set:o,update:c,subscribe:s}}let ve={thots:[{id:0,heading:"1st",content:"thot 1",children:[1,4],metadata:{},customMetadata:{}},{id:1,heading:"2nd",content:"thot 1.1",children:[5]},{id:2,heading:"5th",content:"thot 1.2.1",children:[3]},{id:3,heading:"6th",content:"thot 1.2.1.1",children:[]},{id:4,heading:"4th",content:"thot 1.2",children:[2]},{id:5,heading:"3th",content:"thot 1.1.1",children:[]}]},Xe=ve.thots[0],Ye=30;const we=function(e){let t=0,n=[],i=[0];function o(c){t++,i[i.length-1]++;let s=[...i];if(n=[...n,{index:s,thot:c}],c.children.length>0){i.push(0);for(let u of c.children){let r=ve.thots.find(l=>l.id===u);if(t<Ye)o(r);else break}}else i.pop()}return o(e),n};ye(we(Xe));function me(e,t,n){const i=e.slice();return i[12]=t[n],i[13]=t,i[14]=n,i}function pe(e){let t,n=e[14],i,o;const c=()=>e[4](t,n),s=()=>e[4](null,n);let u={data:e[12],i:e[14]};return t=new We({props:u}),c(),t.$on("focus",e[3]),{c(){W(t.$$.fragment),i=q()},m(r,l){K(t,r,l),U(r,i,l),o=!0},p(r,l){n!==r[14]&&(s(),n=r[14],c());const b={};l&4&&(b.data=r[12]),t.$set(b)},i(r){o||(F(t.$$.fragment,r),o=!0)},o(r){O(t.$$.fragment,r),o=!1},d(r){r&&z(i),s(),V(t,r)}}}function Ze(e){let t,n,i=he(e[2]),o=[];for(let s=0;s<i.length;s+=1)o[s]=pe(me(e,i,s));const c=s=>O(o[s],1,1,()=>{o[s]=null});return{c(){t=v("main");for(let s=0;s<o.length;s+=1)o[s].c();h(t,"id","Content"),h(t,"class","svelte-1hv10mu")},m(s,u){U(s,t,u);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(t,null);n=!0},p(s,[u]){if(u&13){i=he(s[2]);let r;for(r=0;r<i.length;r+=1){const l=me(s,i,r);o[r]?(o[r].p(l,u),F(o[r],1)):(o[r]=pe(l),o[r].c(),F(o[r],1),o[r].m(t,null))}for(Me(),r=i.length;r<o.length;r+=1)c(r);Ne()}},i(s){if(!n){for(let u=0;u<i.length;u+=1)F(o[u]);n=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)O(o[u]);n=!1},d(s){s&&z(t),Ee(o,s)}}}function et(e,t,n){let i,o,c,s=k,u=()=>(s(),s=ke(i,f=>n(2,c=f)),i);e.$$.on_destroy.push(()=>s());let r={id:0,heading:"1st",content:"thot 1",children:[1,4],metadata:{},customMetadata:{}};function l(f,d){alert("triggered");let a=[...f.index].pop(),p=c.find(j=>j.index===a);p.thot.children=[...p.thot.children,new_container.thot.id],console.log(c)}//! need to update children data of the parent thot.
ie("createBrotherContainer",l);let b=null;function x(f){console.log("F!"),console.log(f),b&&b.root.classList.remove("focused"),b=f,f.root.classList.add("focused"),console.log(f),f.contentTextarea.focus()}function m(f){let d=o[f];x(d)}ie("focusContainerAt",m);function w(f,d,E){let a=50;var p="0";"1".search(/\./)<0&&(p=f.slice(0,f.search(/.\d$/)));let j=f+".1",y=null,C=null;switch(E){case"ArrowUp":if(p!=0){for(let _=d-1;-1<_&&a-_>=0&&o.length-1>=_;_--)if(y=o[_],f.match(/\./g)&&y.index.match(/\./g)&&f.match(/\./g).length===y.index.match(/\./g).length&&y.index.search(p)===0&&y.index!=p){C=y;break}}C===null&&-1<d-1&&(C=o[d-1],console.log("sadfsafsa"));break;case"ArrowDown":if(p!=0){for(let _=d+1;-1<_&&_<_+a&&o.length-1>=_;_++)if(y=o[_],f.match(/\./g)&&y.index.match(/\./g)&&f.match(/\./g).length===y.index.match(/\./g).length&&y.index.search(p)===0&&y.index!=p){C=y;break}}C===null&&(console.log("!!"),d+1<=o.length-1&&(C=o[d+1],console.log("sadfsafsa")));break;case"ArrowLeft":for(let _=d;-1<_&&a-_>=0&&o.length-1>=_;_--)if(y=o[_],y.index===p){C=y;break}break;case"ArrowRight":for(let _=d;-1<_&&_<_+a&&o.length-1>=_;_++)if(y=o[_],y.index===j){C=y;break}break}C&&(console.log(C),x(C))}ie("moveContainerFocus",w);function T(f,d){L[f?"unshift":"push"](()=>{o[d]=f,n(0,o)})}return u(n(1,i=ye(we(r)))),n(0,o=[]),[o,i,c,x,T]}class tt extends Y{constructor(t){super(),X(this,t,et,Ze,R,{})}}function nt(e){let t,n,i,o,c,s,u,r,l,b,x,m,w,T,f,d,E;return c=new Ve({}),u=new tt({}),{c(){t=v("main"),n=v("div"),i=v("div"),i.innerHTML="<button>⮜</button> <button>⮞</button> <button>⮝</button> <button>⮟</button>",o=q(),W(c.$$.fragment),s=q(),W(u.$$.fragment),r=q(),l=v("div"),b=v("button"),b.textContent="font size up",x=q(),m=v("button"),m.textContent="font size down",w=ce(`
  폰트 테스트
  가나다라마바사 ABCDEFG
  The quick brown fox jumps over the lazy dog
  다람쥐 헌 쳇바퀴에 타고파
  !@#$%^&*
  asdfsaf
  `),T=v("div"),T.textContent=`${e[1]} / ${e[2]} / ${e[3]} / ${e[4]}`,h(i,"id","keyboard_toolbar"),h(i,"class","svelte-l08pdq"),h(n,"id","overlay"),h(n,"class","svelte-l08pdq"),h(t,"class","svelte-l08pdq")},m(a,p){U(a,t,p),g(t,n),g(n,i),e[5](i),g(t,o),K(c,t,null),g(t,s),K(u,t,null),g(t,r),g(t,l),g(l,b),g(l,x),g(l,m),g(t,w),g(t,T),f=!0,d||(E=S(b,"click",it),d=!0)},p:k,i(a){f||(F(c.$$.fragment,a),F(u.$$.fragment,a),f=!0)},o(a){O(c.$$.fragment,a),O(u.$$.fragment,a),f=!1},d(a){a&&z(t),e[5](null),V(c),V(u),d=!1,E()}}}const it=()=>{};function ot(e,t,n){let i=window.innerHeight,o=window.outerHeight,c=document.documentElement.clientHeight,s=window.visualViewport.height,u;visualViewport.onresize=()=>{n(0,u.style.top=window.visualViewport.height-u.style.height+"px",u)};function r(l){L[l?"unshift":"push"](()=>{u=l,n(0,u)})}return[u,i,o,c,s,r]}class rt extends Y{constructor(t){super(),X(this,t,ot,nt,R,{})}}new rt({target:document.getElementById("app")});
